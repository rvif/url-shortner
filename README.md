# URL Shortener

A modern URL shortening application built with Vite + React that enables users to create, manage, and track shortened URLs. Features include custom URLs, QR code generation, and detailed click analytics with geolocation data.

## 🚀 Features

- **URL Shortening**: Convert long URLs into short, manageable links
- **Custom URLs**: Create personalized short URLs
- **QR Code Generation**: Automatic QR code generation for all shortened URLs
- **Advanced Analytics**: Track clicks with detailed information:
  - Geographic location (country and city)
  - Device information
  - Click timestamps
- **User Management**: 
  - Secure authentication via Supabase
  - Profile picture upload
  - Personal dashboard
- **Responsive UI**: Built with Radix UI primitives and TailwindCSS
- **Real-time Charts**: Visualize click data with Recharts

## 🛠️ Tech Stack

- [Vite](https://vitejs.dev/) - Build tool and development server
- [React](https://reactjs.org/) - UI Framework
- [Supabase](https://supabase.com/) - Backend and Authentication
- [React Router v6](https://reactrouter.com/) - Navigation
- [Radix UI](https://www.radix-ui.com/) - Unstyled, accessible components
- [TailwindCSS](https://tailwindcss.com/) - Styling
- [Recharts](https://recharts.org/) - Charts and Analytics
- [React QR Code Logo](https://www.npmjs.com/package/react-qrcode-logo) - QR Code Generation
- [UA Parser JS](https://www.npmjs.com/package/ua-parser-js) - Device Detection
- [Yup](https://github.com/jquense/yup) - Form Validation

## 📦 Installation

1. Clone the repository:
```bash
git clone https://github.com/rvif/url-shortner.git
cd url-shortner
```

2. Install dependencies:
```bash
npm install
```

3. Set up environment variables in `.env`:
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

4. Start the development server:
```bash
npm run dev
```

## 🗄️ Database Schema

### URLs Table
```sql
create table public.urls (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  original_url text null,
  short_url text null,
  custom_url text null,
  user_id uuid null,
  title text null,
  qr text null,
  constraint urls_pkey primary key (id),
  constraint urls_short_url_key unique (short_url),
  constraint urls_user_id_fkey foreign key (user_id) references auth.users (id)
);
```

### Clicks Table
```sql
create table public.clicks (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  url_id bigint null,
  city text null,
  device text null,
  country text null,
  constraint clicks_pkey primary key (id),
  constraint clicks_url_id_fkey foreign key (url_id) references urls (id) on delete cascade
);
```

## 🗂️ Supabase Storage Buckets

The application uses two storage buckets:
- `profile_pic` - For user profile images
- `qrs` - For storing generated QR codes

## 🚀 Deployment

1. Create a `vercel.json` in the root directory:
```json
{
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

2. Set up environment variables in Vercel:
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`

3. Deploy to Vercel:
```bash
vercel
```

## 🔒 Security Features

- Supabase Authentication
- Row Level Security (RLS) policies
- User-specific URL management
- Secure file upload handling
- Protected API routes

## 📝 License

This project is open source and available under the [MIT License](LICENSE).

## 🔗 Links

- Repository: [https://github.com/rvif/url-shortner](https://github.com/rvif/url-shortner)
- Issue tracker: [https://github.com/rvif/url-shortner/issues](https://github.com/rvif/url-shortner/issues)
